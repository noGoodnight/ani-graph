<template>
  <div id="kg-search-line-body">
    <div id="kg-search-line-switch" @click="handleSwitchClick">
      <!--      <svg v-if="!display" height="25" style="margin-top: 25px; margin-left: 10px" version="1.1"-->
      <!--           viewBox="0 0 1024 1024" width="32" xmlns="http://www.w3.org/2000/svg">-->
      <!--        <path-->
      <!--          d="M729.6 931.2l-416-425.6 416-416c9.6-9.6 9.6-25.6 0-35.2-9.6-9.6-25.6-9.6-35.2 0l-432 435.2c-9.6 9.6-9.6 25.6 0 35.2l432 441.6c9.6 9.6 25.6 9.6 35.2 0C739.2 956.8 739.2 940.8 729.6 931.2z"-->
      <!--          fill="#333333" p-id="2069"></path>-->
      <!--      </svg>-->

<!--      <svg v-if="!display" style="margin-top: 23px; margin-left: 14px"-->
<!--           t="1639624029335" class="icon" viewBox="0 0 1070 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"-->
<!--           p-id="10697" width="26" height="26">-->
<!--        <path-->
<!--          d="M547.137255 954.980392c-238.431373 0-493.176471-55.215686-493.176471-159.372549 0-75.294118 130.509804-114.196078 209.568628-131.764706 10.039216-2.509804 20.078431 3.764706 22.588235 13.803922 2.509804 10.039216-3.764706 20.078431-13.803922 22.588235-124.235294 27.607843-180.705882 67.764706-180.705882 96.627451 0 50.196078 173.176471 121.72549 455.529412 121.72549 37.647059 0 75.294118-1.254902 111.686274-3.764706 10.039216 0 18.823529 7.529412 20.078432 17.568628 1.254902 10.039216-7.529412 18.823529-17.568628 20.078431-37.647059 1.254902-75.294118 2.509804-114.196078 2.509804zM752.941176 943.686275c-8.784314 0-17.568627-7.529412-18.823529-16.313726-1.254902-10.039216 6.27451-20.078431 16.313726-21.333333l5.019607-1.254902c10.039216-1.254902 20.078431 6.27451 21.333334 16.313725s-6.27451 20.078431-16.313726 21.333334l-5.019608 1.254902H752.941176zM858.352941 921.098039c-8.784314 0-16.313725-5.019608-18.823529-13.803921-2.509804-10.039216 3.764706-20.078431 13.803921-22.588236 109.176471-28.862745 148.078431-65.254902 148.078432-87.843137 0-27.607843-55.215686-67.764706-178.196079-94.117647-10.039216-2.509804-16.313725-12.54902-13.803921-22.588235 2.509804-10.039216 12.54902-16.313725 22.588235-13.803922 134.27451 28.862745 208.313725 75.294118 208.313725 131.764706 0 65.254902-96.627451 102.901961-176.941176 124.235294-1.254902-1.254902-2.509804-1.254902-5.019608-1.254902z"-->
<!--          fill="#0B3155" p-id="10698"></path>-->
<!--        <path-->
<!--          d="M548.392157 854.588235l-12.54902-11.294117c-11.294118-11.294118-291.137255-279.843137-291.137255-518.27451C245.960784 87.843137 444.235294 25.098039 549.647059 25.098039c97.882353 0 298.666667 70.27451 298.666666 289.882353 0 215.843137-171.921569 434.196078-287.372549 528.313726l-12.549019 11.294117zM549.647059 62.745098c-2.509804 0-266.039216 2.509804-266.039216 261.019608 0 197.019608 213.333333 425.411765 267.294118 479.372549 105.411765-92.862745 259.764706-296.156863 259.764706-489.411765 0-204.54902-193.254902-250.980392-261.019608-250.980392z m-2.509804 407.843137c-22.588235 0-45.176471-5.019608-65.254902-15.058823-77.803922-36.392157-112.941176-129.254902-76.54902-208.313726 17.568627-37.647059 48.941176-66.509804 87.843138-81.568627 38.901961-15.058824 81.568627-12.54902 119.215686 5.019608s66.509804 48.941176 81.568627 87.843137c15.058824 38.901961 12.54902 81.568627-5.019608 119.215686s-48.941176 66.509804-87.843137 81.568628c-17.568627 8.784314-35.137255 11.294118-53.960784 11.294117z m0-276.078431c-13.803922 0-27.607843 2.509804-41.411765 7.529412-28.862745 11.294118-52.705882 33.882353-66.509804 62.745098-13.803922 28.862745-15.058824 61.490196-3.764706 90.352941 11.294118 30.117647 32.627451 53.960784 61.490196 66.509804 28.862745 13.803922 61.490196 15.058824 90.352942 3.764706 30.117647-11.294118 53.960784-32.627451 66.509804-61.490196 13.803922-28.862745 15.058824-61.490196 3.764705-90.352942s-32.627451-53.960784-61.490196-66.509803c-15.058824-8.784314-31.372549-12.54902-48.941176-12.54902z"-->
<!--          fill="#0B3155" p-id="10699"></path>-->
<!--      </svg>-->

      <svg v-if="!display" style="margin-top: 23px; margin-left: 14px"
           t="1639638252783" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
           p-id="4750" width="26" height="26">
        <path
          fill="#666"
          d="M967.9234 816.206954l-147.416093-192.48379c52.29229-49.884092 85.146985-119.721821 85.146985-197.472199 0-150.684361-122.990089-273.330422-274.018478-273.330422-151.200403 0-274.018478 122.646061-274.018478 273.330422s122.990089 273.330422 274.018478 273.330422c48.679993 0 94.263733-12.901058 133.998992-35.090879l147.932135 193.171846c6.70855 8.77272 16.857383 13.417101 27.350244 13.417101 7.224593 0 14.621199-2.236183 20.641693-7.052579C976.524105 852.501932 979.448345 831.172182 967.9234 816.206954L967.9234 816.206954zM421.090543 426.250966c0-115.765496 94.435747-209.857215 210.545271-209.857215s210.545271 94.091718 210.545271 209.857215-94.435747 209.857215-210.545271 209.857215S421.090543 542.016462 421.090543 426.250966L421.090543 426.250966zM288.467663 288.811692 83.254829 288.811692c-18.921552 0-34.230808-15.309256-34.230808-34.058794s15.309256-34.058794 34.230808-34.058794l205.212834 0c18.921552 0 34.230808 15.309256 34.230808 34.058794C322.698471 273.502436 307.389216 288.811692 288.467663 288.811692L288.467663 288.811692zM280.210986 626.131362 83.254829 626.131362c-18.921552 0-34.230808-15.309256-34.230808-34.058794s15.309256-34.058794 34.230808-34.058794l196.956157 0c18.921552 0 34.230808 15.309256 34.230808 34.058794C314.441794 610.822107 299.132538 626.131362 280.210986 626.131362L280.210986 626.131362zM239.78767 457.041492l-156.532841 0c-18.921552 0-34.230808-15.309256-34.230808-34.230808 0-18.921552 15.309256-34.230808 34.230808-34.230808l156.532841 0c18.921552 0 34.230808 15.309256 34.230808 34.230808C273.846464 441.732236 258.537208 457.041492 239.78767 457.041492L239.78767 457.041492zM460.137746 801.241727 83.254829 801.241727c-18.921552 0-34.230808-15.309256-34.230808-34.230808s15.309256-34.230808 34.230808-34.230808l376.882916 0c18.921552 0 34.230808 15.309256 34.230808 34.230808C494.368554 785.932471 479.059298 801.241727 460.137746 801.241727L460.137746 801.241727z"
          p-id="4751"></path>
      </svg>

      <svg v-if="display" height="25" style="margin-top: 22.5px; margin-left: 10px" version="1.1"
           viewBox="0 0 1024 1024" width="32" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M761.6 489.6l-432-435.2c-9.6-9.6-25.6-9.6-35.2 0-9.6 9.6-9.6 25.6 0 35.2l416 416-416 425.6c-9.6 9.6-9.6 25.6 0 35.2s25.6 9.6 35.2 0l432-441.6C771.2 515.2 771.2 499.2 761.6 489.6z"
          fill="#666"></path>
      </svg>
      <!--      <div style="display: inline-block; position: relative; bottom: 8px; left: 2px; font-weight: bold">-->
      <!--        {{ switchTip }}-->
      <!--      </div>-->
    </div>
    <div id="kg-search-line-tip">搜索</div>
    <div
      style="width: 60%; outline: solid 1px gray; height: 0;margin-top: 1px;margin-bottom: 6px; margin-left: 20%; display: inline-block"></div>
    <div id="kg-search-line-main">
      <input id="kg-search-line-input" v-model="content" @keydown.enter="emitSearchEvent">
      <div id="kg-search-line-result">
        <div id="kg-search-line-result-last" @click="emitPrevResultEvent">
          <svg height="16" version="1.1" viewBox="0 0 1024 1024" width="16" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M910.222222 796.444444c-17.066667 0-34.133333-5.688889-45.511111-17.066666L551.822222 409.6c-11.377778-5.688889-17.066667-11.377778-34.133333-11.377778-5.688889 0-22.755556 5.688889-28.444445 11.377778l-329.955555 364.088889c-22.755556 22.755556-56.888889 22.755556-79.644445 5.688889-22.755556-22.755556-22.755556-56.888889-5.688888-79.644445l329.955555-364.088889c28.444444-34.133333 73.955556-51.2 119.466667-51.2s85.333333 22.755556 119.466666 56.888889l312.888889 364.088889c22.755556 22.755556 17.066667 56.888889-5.688889 79.644445-11.377778 5.688889-28.444444 11.377778-39.822222 11.377777z"
              fill="#707070"></path>
          </svg>
        </div>
        <div id="kg-search-line-result-next" @click="emitNextResultEvent">
          <svg height="16" version="1.1" viewBox="0 0 1024 1024" width="16" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M517.688889 796.444444c-45.511111 0-85.333333-17.066667-119.466667-51.2L73.955556 381.155556c-22.755556-22.755556-17.066667-56.888889 5.688888-79.644445 22.755556-22.755556 56.888889-17.066667 79.644445 5.688889l329.955555 364.088889c5.688889 5.688889 17.066667 11.377778 28.444445 11.377778s22.755556-5.688889 34.133333-17.066667l312.888889-364.088889c22.755556-22.755556 56.888889-28.444444 79.644445-5.688889 22.755556 22.755556 28.444444 56.888889 5.688888 79.644445L637.155556 739.555556c-28.444444 39.822222-68.266667 56.888889-119.466667 56.888888 5.688889 0 0 0 0 0z"
              fill="#707070"></path>
          </svg>
        </div>
        <div id="kg-search-line-result-tip">第{{ currentIndex }}个结果，共{{ totalNum }}个</div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: "KgSearchLine",
  data() {
    return {
      content: "",
      display: false,
      switchTip: "搜索",
    };
  },
  props: {
    totalNum: Number,
    currentIndex: Number,
  },
  methods: {
    handleSwitchClick() {
      this.display = !this.display;
      if (this.display) {
        this.switchTip = "隐藏";
      } else {
        this.switchTip = "搜索";
      }
      this.$emit("display-switch", this.display);
    },

    emitSearchEvent() {
      if (this.content !== "") {
        this.$emit("search-acknowledge", this.content);
      }
    },

    emitSearchCancelEvent() {
      this.$emit("search-cancel");
    },

    emitNextResultEvent() {
      this.$emit("next-result");
    },

    emitPrevResultEvent() {
      this.$emit("prev-result");
    },

    setContent(content) {
      this.content = content;
    }
  }
};
</script>

<style scoped>
#kg-search-line-body {
}

#kg-search-line-switch {
  height: 70px;
  width: 50px;
  position: absolute;
  left: -50px;
  /*backdrop-filter: saturate(200%) blur(30px);*/
  background: rgba(240, 240, 240, 0.95);
  box-shadow: 0 3px 5px rgba(220, 220, 220, 0.7);
  border-radius: 30px 0 0 30px;
}

#kg-search-line-switch:hover {
  cursor: pointer;
}

#kg-search-line-tip {
  font-weight: bold;
  text-align: center;
  user-select: none;
}

#kg-search-line-main {
  display: flex;
  align-items: center;
}

#kg-search-line-input {
  outline: none;
  border: none;
  font-size: 16px;
}

#kg-search-line-result {
  display: flex;
  align-items: center;
}

#kg-search-line-result-last {
  padding: 5px;
  margin-left: 5px;
  height: 26px;
  cursor: pointer;
}

#kg-search-line-result-last:hover {
  background: rgba(220, 220, 220, 0.7);
  border-radius: 50%;
}

#kg-search-line-result-next {
  padding: 5px;
  margin-left: 2px;
  margin-right: 5px;
  height: 26px;
  cursor: pointer;
}

#kg-search-line-result-next:hover {
  background: rgba(220, 220, 220, 0.7);
  border-radius: 50%;
}

#kg-search-line-result-tip {
  user-select: none;
}
</style>